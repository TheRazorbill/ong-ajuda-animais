document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".mobile-menu-button"),t=document.getElementById("main-nav-links");e&&t&&e.addEventListener("click",()=>{let n=t.classList.toggle("is-open");e.setAttribute("aria-expanded",n);let l=n?"Fechar menu":"Abrir menu";e.setAttribute("aria-label",l)});let n=document.getElementById("registrationForm");if(n){let l=document.querySelectorAll(".form-section"),a=document.querySelectorAll(".step-indicator"),o=1,i=IMask(document.getElementById("cpf"),{mask:"000.000.000-00"}),r=IMask(document.getElementById("phone"),{mask:"(00) 00000-0000"}),d=IMask(document.getElementById("cep"),{mask:"00000-000"}),s=document.getElementById("cep");s.addEventListener("blur",async()=>{let e=d.unmaskedValue;if(8===e.length)try{let t=await fetch(`https://viacep.com.br/ws/${e}/json/`);if(!t.ok)throw Error("CEP n\xe3o encontrado");let n=await t.json();n.erro?c(s,"CEP n\xe3o encontrado."):(document.getElementById("street").value=n.logradouro,document.getElementById("neighborhood").value=n.bairro,document.getElementById("city").value=n.localidade,document.getElementById("state").value=n.uf)}catch(l){c(s,"N\xe3o foi poss\xedvel buscar o CEP."),console.error("Erro ao buscar CEP:",l)}});let m=()=>{l.forEach(e=>e.classList.remove("active")),document.getElementById(`section${o}`).classList.add("active"),a.forEach((e,t)=>{let n=t+1;e.classList.remove("active","completed"),n<o?e.classList.add("completed"):n===o&&e.classList.add("active")})},c=(e,t)=>{e.classList.add("input-error");let n=e.nextElementSibling;n&&n.classList.contains("error-message")&&(n.textContent=t,n.style.display="block")},v=e=>{e.classList.remove("input-error");let t=e.nextElementSibling;t&&t.classList.contains("error-message")&&(t.style.display="none")},g=e=>{let t=document.getElementById(`section${e}`),n=t.querySelectorAll("input[required], select[required]"),l=!0;return n.forEach(e=>{v(e),e.value.trim()?"email"!==e.type||/^\S+@\S+\.\S+$/.test(e.value)?"cpf"===e.id&&11!==i.unmaskedValue.length?(l=!1,c(e,"Por favor, insira um CPF v\xe1lido.")):"phone"===e.id&&r.unmaskedValue.length<10&&(l=!1,c(e,"Por favor, insira um telefone v\xe1lido.")):(l=!1,c(e,"Por favor, insira um email v\xe1lido.")):(l=!1,c(e,"Este campo \xe9 obrigat\xf3rio."))}),l},u=()=>{document.getElementById("reviewFullName").textContent=document.getElementById("fullName").value,document.getElementById("reviewEmail").textContent=document.getElementById("email").value,document.getElementById("reviewCpf").textContent=document.getElementById("cpf").value,document.getElementById("reviewPhone").textContent=document.getElementById("phone").value,document.getElementById("reviewBirthDate").textContent=new Date(document.getElementById("birthDate").value+"T00:00:00").toLocaleDateString("pt-BR"),document.getElementById("reviewGender").textContent=document.getElementById("gender").value||"N\xe3o informado",document.getElementById("reviewCep").textContent=document.getElementById("cep").value,document.getElementById("reviewStreet").textContent=document.getElementById("street").value,document.getElementById("reviewNumber").textContent=document.getElementById("number").value,document.getElementById("reviewComplement").textContent=document.getElementById("complement").value||"N/A",document.getElementById("reviewNeighborhood").textContent=document.getElementById("neighborhood").value,document.getElementById("reviewCityState").textContent=`${document.getElementById("city").value} - ${document.getElementById("state").value}`;let e=Array.from(document.querySelectorAll('input[name="helpTypes"]:checked')).map(e=>e.value).join(", ");document.getElementById("reviewHelpTypes").textContent=e||"Nenhum selecionado",document.getElementById("reviewAvailability").textContent=document.getElementById("availability").value||"N\xe3o informado",document.getElementById("reviewSkills").textContent=document.getElementById("skills").value||"N\xe3o informado"};n.addEventListener("click",e=>{e.target.classList.contains("next-btn")?g(o)&&(3===o&&u(),o++,m()):e.target.classList.contains("prev-btn")&&(o--,m())}),n.addEventListener("submit",e=>{e.preventDefault(),console.log("Formul\xe1rio enviado!"),o=5,m()})}});